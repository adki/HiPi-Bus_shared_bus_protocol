%%%%%
%%Title: HiPi+Bus V0.2 Chapter 2
%%Creator: Ando Ki
%%CreationDate: April 1992
%%FileName: sec2
%%RelatedFile: ch2
%%%%%
\section{중재 버스의 신호선}
중재 버스(ARB)의 신호선은 어드레스 중재 버스(AARB)와 
데이터 중재 버스(DARB)로 나뉘어진다.  데이터 전송 버스의 기본 주기 중
어드레스 데이터 주기를 제외하면 어드레스 버스와 데이터 버스는 상호 독립적으로
동작하기 때문에 중재 버스도 분리된다. \\
%
\input{ch2/TBL/arb-signal}
%
\subsection{어드레스 중재 버스}
%
\subsubsection{Address Bus Request : ABRQ{\tt <}12..0{\tt >}*}
RQ가 위치할 수 있는 슬롯마다 하나의 신호가 할당된다.
{\tt <}표~\ref{table:abrq-signal}{\tt >}과 같이 슬롯0부터 슬롯12까지
번호 순으로 할당되어 있다. 이 신호는 각 슬롯에 위치하는 RQ가 어드레스 버스를
사용하고자 할 때 구동하며, 어드레스 버스 사용허가를 받으면 ``거짓''으로 구동한다.
각 슬롯에 꽂히는 RQ는 슬롯 어드레스 GA{\tt <}4..0{\tt >}*를 통하여 자신이 
사용할 신호선을 알 수 있다.
중재 번호가 높을수록 우선순위가 높다.
\input{ch2/TBL/abrq-signal}
%
\subsubsection{Address Bus Arbitration Inhibit : ABINH*}
어드레스 버스 중재 동작을 제한하여
어드레스 버스의 사용을 일시적으로 중단시키기 위해 사용되는 신호이다.
하나의 RQ가 이 신호를 ``참''으로 구동하면 나머지 RQ들은
이 신호가 ``거짓''이 될 때까지
어드레스 버스 중재 요청 신호 구동을 중단하게 된다.
RP가 이 신호를 구동한 경우는 모든 RQ들이 이 신호가 ``거짓''으로 될 때까지
어드레스 버스 중재 요청 신호 구동을 중단하게 된다.
이 신호는 여러개의 RP가 구동을 할 수 있지만,
RQ의 경우는 반드시 하나의 RQ만이 구동하도록 해야 한다. 따라서
RQ가 이 신호를 구동하기 위해서는 먼저 어드레스 버스 중재 동작을 수행하여 
버스 사용권을 획득해야만 한다.
보통 동작 상태에서는 미리 정해진 일정한 시간 이상의 구동은 허용되지 않는다

이 신호는 중재 주기 단위로 제어를 하며, ``참''으로 구동되어 있는 경우 
진행 중인 중재의 결과는 아무런 의미를 갖지 못한다. 이후 이 신호가 ``거짓''이 될 
때까지 어드레스 중재 동작이 제한을 받게 된다.
%
\subsubsection{Write Bus Cycle Inhibit : WRINH*}
이 신호가 사용되는 경우는 다음 두가지 경우이다. \\
첫째, 블록 전송 중 쓰기 전송인 경우 어드레스 중재의 결과로 어드레스를 구동하는 RQ가
어드레스 구동 시점부터 두번째 데이터 구동 시점까지 이 신호를 구동하여 다른 쓰기 전송과의
데이터 버스 충돌을 방지한다. \\
둘째, 블록 전송 중 읽기 전송에 대한 블록 전송 데이터 기본주기를 수행할 때 해당 RP가
데이터 버스 중재 주기 시점부터 두번째 데이터 구동 시점까지 이 신호를 구동하여
다른 쓰기 전송과의 데이터 버스 충돌을 방지한다.

이 신호가 ``참''으로 구동되어 있는 경우 진행 중인 중재중 쓰기 전송에 관련되는 것은
그 결과를 포기하게 되고 이 신호가 ``거짓''이 될 때까지 어드레스 버스 중재 동작이
제한을 받게 된다. 그러나 읽기 전송의 경우는 무관하게 어드레스 버스 중재가 수행된다.
%
\subsection{데이터 중재 버스}
%
\subsubsection{Data Bus Request : DBRQ{\tt <}8..0{\tt >}*}
RP가 위치할 수 있는 슬롯마다 하나의 신호가 할당된다. 즉, 슬롯10과 슬롯13-20까지
이 신호가 하나씩 할당된다. {\tt <}표~\ref{table:dbrq-signal}{\tt >}는
각 슬롯에 대응되는 신호를 보여주고 있다.
이 신호는 각 슬롯에 위치하는 RP가 데이터 버스를
사용하고자 할 때 구동하며, 데이터 버스 사용허가를 받으면 ``거짓''으로 구동한다.
각 슬롯에 꽂히는 RP는 슬롯 어드레스 GA{\tt <}4..0{\tt >}*를 통하여 자신이 
사용할 신호선을 알 수 있다.
중재 번호가 높을수록 우선순위가 높다.
%
\input{ch2/TBL/dbrq-signal}
%
\subsubsection{Data Bus Arbitration Inhibit : DBINH*}
이 신호가 사용되는 경우는 다음 세가지 경우이다. \\
첫째, 단일 전송 중 쓰기 전송인 경우 어드레스 중재의 결과로 어드레스를 구동하는
RQ가 어드레스 구동 시점에 이신호를 구동하여 데이터 버스 충돌을 방지한다.\\
둘째, 블록 전송 중 쓰기 전송인 경우 어드레스 중재의 결과로 어드레스를 구동하는
RQ가 어드레스 구동 시점부터 세번째 데이터 구동 시점까지 이 신호를 구동하여 다른 데이터
기본주기 또는 블록 데이터 기본주기와의 데이터 버스 충돌을 방지한다. \\
세째, 블록 전송 중 읽기 전송에 대한 블록 전송 데이터 기본주기를 수행할 때 해당
RP가 데이터 구동 시점부터 세번째 데이터 구동 시점까지 이 신호를 구동하여 데이터
버스 충돌을 방지한다.

이 신호가 ``참''으로 구동되어 있는 경우 진행 중인 데이터 버스 중재의
결과는 무시하게 되고 이 신호가 ``거짓''이 될 때까지 데이터 버스 중재 동작이
제한을 받게 된다.
%
\subsubsection{Priority Change Window : PCW*}
이 신호는 블록 전송 중 읽기 전송에서 연속된 블록 전송 데이터 기본 사이클이 데이터 버스 중재 때 부터
WRINH* 신호를 구동함으로써 쓰기 전송을 막는 결과를 초래할 수 있는 경우를 방지하기 위해 사용한다.

블록 전송 데이터 기본 사이클을 위한 데이터 버스 중재에서 데이터 버스 사용권을 획득한
경우 데이터 버스사용과 함께 구동을 시작하여 WRINH* 신호를 걷어낼때 같이 걷어낸다.
즉 블록 전송 데이터 기본 사이클을 수행하는 자신이 구동하는 DBINH*, WRINH* 신호가 모두
구동되는 경우 구동한다.
%
%PCW* 신호가 구동되어 있는 것을 확인한 경우 다른 보드에서 진행되고 있는 블록 전송
%데이터 기본 사이클은 데이터 버스 중재를 보류하여 WRINH* 신호를 구동하지 않아야 한다.

PCW*는 블록 전송 데이터 기본 사이클에서 데이터 중재에서 데이터 버스 사용권을 획득한
보드가 구동하고, PCW* 신호가 구동되어 있는 것을 확인한 다른 보드는 블록 전송 데이터 기본
사이클을 위한 DBRQ{\tt <}n{\tt >}*와 WRINH* 신호 구동을 멈추어야 한다.
그리고 PCW*에 의해 중단된 블록 전송 데이터 기본 사이클은 PCW* 신호가 ``거짓''이
된 것을 발견하면 재시도 한다.
%
